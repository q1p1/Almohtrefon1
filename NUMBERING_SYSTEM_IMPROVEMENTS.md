# ุชุญุณููุงุช ูุธุงู ุงูุชุฑููู (Numbering System)

## ุงููุดุงูู ุงูุชู ุชู ุญููุง โ

### 1. **ูุณุงุญุฉ ุงูุชุณูุณู ุงูุตุบูุฑุฉ (99 ููุท ููู ุณูุฉ)**

- **ุงููุดููุฉ ุงูุณุงุจูุฉ**: `yearPrefix * 100 + seq` - ูุณุงุญุฉ 99 ููุท ููู ุณูุฉ
- **ุงูุญู**: `yearPrefix * 10000 + seq` - ูุณุงุญุฉ 9999 ููู ุณูุฉ
- **ุงูููุงุฆุฏ**: ุฏุนู ุญุชู 9999 ุนุถู ููู ุณูุฉ ุจุฏูุงู ูู 99

### 2. **ุญุณุงุจ ุณูุฉ ุงูุนุถููุฉ ุบูุฑ ูุชูุงูู ูุณุชูุจูุงู**

- **ุงููุดููุฉ ุงูุณุงุจูุฉ**: `Math.floor(vol.memberNo / 100)` - ูุฑุจูุท ุจุงูุชุฑุงุถ ุฎุงูุชูู ููุท
- **ุงูุญู**: `Math.floor(memberNo / 10000)` - ูุชูุงูู ูุน ุงูุตูุบุฉ ุงูุฌุฏูุฏุฉ
- **ุงูููุงุฆุฏ**: ูุฑููุฉ ูู ุชุบููุฑ ุตูุบุฉ ุงูุฃุฑูุงู ูุณุชูุจูุงู

### 3. **ุนุฏู ุญุฑุงุณุฉ JSON ูู localStorage**

- **ุงููุดููุฉ ุงูุณุงุจูุฉ**: `JSON.parse(stored)` ูุจุงุดุฑุฉ - crash ุนูุฏ JSON ุชุงูู
- **ุงูุญู**: `safeReadJSON()` ูุน `try/catch` ููุญุต ุงูููุน
- **ุงูููุงุฆุฏ**: ููุน ูุณุฑ ุงูุชุทุจูู ุนูุฏ ุจูุงูุงุช ุชุงููุฉ

### 4. **ุชุนุฏุฏ ุงูุชุจููุจุงุช = ุฃุฑูุงู ููุฑุฑุฉ**

- **ุงููุดููุฉ ุงูุณุงุจูุฉ**: ูุง ููุฌุฏ "ููู" ุฃู ุนุฏุงุฏ ูุฑูุฒู
- **ุงูุญู**: ุนุฏุงุฏ ูููุตู ูู localStorage ูุน `getNextCounter()`
- **ุงูููุงุฆุฏ**: ููุน ุงูุชูุฑุงุฑ ุญุชู ูุน ุชุจููุจุงุช ูุชุนุฏุฏุฉ

### 5. **ุงูุงุนุชูุงุฏ ุนูู ุงุณุชุฎุฑุงุฌ ุฑูู ุงูุจูุงุบ ูู ููุงูุฉ ID**

- **ุงููุดููุฉ ุงูุณุงุจูุฉ**: regex ูุนูุฏ ููุนุฑูุถ ูููุดู
- **ุงูุญู**: ุนุฏุงุฏ ูููุตู + ID ูุฑูุฏ ูุน timestamp
- **ุงูููุงุฆุฏ**: ุงุณุชูุฑุงุฑ ุฃุนูู ููุฑููุฉ ูู ุชุบููุฑ ุตูุบุฉ ID

## ุงูููุฒุงุช ุงูุฌุฏูุฏุฉ ๐

### 1. **ุนุฏุงุฏุงุช ูููุตูุฉ ูุขููุฉ**

```typescript
// ุนุฏุงุฏ ูููุตู ููู ุณูุฉ
const counterKey = `member_${yearPrefix}`;
const sequenceNumber = getNextCounter(counterKey);
```

### 2. **ุฏูุงู ุขููุฉ ููุฑุงุกุฉ/ูุชุงุจุฉ localStorage**

```typescript
// ูุฑุงุกุฉ ุขููุฉ ูุน fallback
const data = safeReadJSON<VolunteerRow[]>(VOLUNTEERS_KEY, []);

// ูุชุงุจุฉ ุขููุฉ ูุน error handling
const success = safeWriteJSON(COUNTERS_KEY, counters);
```

### 3. **ID ูุฑูุฏ ูุน timestamp ูููุน ุงูุชูุฑุงุฑ**

```typescript
// ID ูุฑูุฏ ุญุชู ูู ุชูุฑุฑ ุงูุฑูู ุงูุชุณูุณูู
const id = `incident_${number}_${timestamp}_${random}`;
```

### 4. **ุฏูุงู ูุณุงุนุฏุฉ ููุชุญูู ูู ุตุญุฉ ุงูุฃุฑูุงู**

```typescript
// ุงูุชุญูู ูู ุตุญุฉ ุฑูู ุงูุนุถููุฉ
const isValid = isValidMemberNumber(250001);

// ุงูุญุตูู ุนูู ูุนูููุงุช ุงูุฑูู
const info = getMemberNumberInfo(250001);
// { memberNo: 250001, year: 2025, sequence: 1, formatted: "2025-0001" }
```

### 5. **ูุญุต ุงูุชูุฑุงุฑ ูุงูุชุญูู ูู ุณูุงูุฉ ุงูุจูุงูุงุช**

```typescript
// ูุญุต ุงูุชูุฑุงุฑ ูู ุงูุฃุฑูุงู
const duplicates = checkForDuplicates();
// { duplicateMembers: [], duplicateIncidents: [] }

// ุฅุญุตุงุฆูุงุช ุงูุชุฑููู
const stats = getNumberingStats();
// { currentYear: 25, totalIncidents: 150, totalMembersThisYear: 45 }
```

## ุงูุตูุบุฉ ุงูุฌุฏูุฏุฉ ููุฃุฑูุงู

### ุฃุฑูุงู ุงูุนุถููุฉ

- **ุงูุตูุบุฉ ุงููุฏููุฉ**: `YY + SS` (ูุซู: 2501 = ุณูุฉ 25 + ุชุณูุณู 01)
- **ุงูุตูุบุฉ ุงูุฌุฏูุฏุฉ**: `YY + SSSS` (ูุซู: 250001 = ุณูุฉ 25 + ุชุณูุณู 0001)

### ุฃุฑูุงู ุงูุจูุงุบุงุช

- **ุงูุตูุบุฉ ุงููุฏููุฉ**: `incident_1`, `incident_2`...
- **ุงูุตูุบุฉ ุงูุฌุฏูุฏุฉ**: `incident_1_timestamp_random`, `incident_2_timestamp_random`...

## ุงูุงุณุชุฎุฏุงู

### ุชูููุฏ ุฃุฑูุงู ุฌุฏูุฏุฉ

```typescript
// ุฑูู ุนุถููุฉ ุฌุฏูุฏ
const memberNo = generateMemberNumber(); // 250001

// ุฑูู ุจูุงุบ ุฌุฏูุฏ
const incidentNo = generateIncidentNumber(); // 1

// ID ูุฑูุฏ ููุจูุงุบ
const incidentId = generateIncidentId(); // "incident_1_1703123456789_abc123"

// ID ูุฑูุฏ ูููุชุทูุน
const volunteerId = generateVolunteerId(); // "volunteer_250001_1703123456789_xyz789"
```

### ุงุณุชุฎุฑุงุฌ ุงููุนูููุงุช ูู ุงูุฃุฑูุงู

```typescript
// ุงุณุชุฎุฑุงุฌ ุฑูู ุงูุนุถููุฉ ูู ID
const memberNo = extractMemberNumberFromId(
  "volunteer_250001_1703123456789_xyz789"
);
// 250001

// ุงุณุชุฎุฑุงุฌ ุฑูู ุงูุจูุงุบ ูู ID
const incidentNo = extractIncidentNumberFromId(
  "incident_1_1703123456789_abc123"
);
// 1

// ูุนูููุงุช ููุตูุฉ ุนู ุฑูู ุงูุนุถููุฉ
const info = getMemberNumberInfo(250001);
// {
//   memberNo: 250001,
//   year: 2025,
//   yearPrefix: 25,
//   sequence: 1,
//   formatted: "2025-0001"
// }
```

### ูุญุต ุณูุงูุฉ ุงูุจูุงูุงุช

```typescript
// ุงูุชุญูู ูู ุตุญุฉ ุฑูู ุงูุนุถููุฉ
const isValid = isValidMemberNumber(250001); // true

// ูุญุต ุงูุชูุฑุงุฑ
const duplicates = checkForDuplicates();
if (duplicates.duplicateMembers.length > 0) {
  console.warn("ุชูุฌุฏ ุฃุฑูุงู ุนุถููุฉ ููุฑุฑุฉ:", duplicates.duplicateMembers);
}

// ุฅุญุตุงุฆูุงุช ุงููุธุงู
const stats = getNumberingStats();
console.log(`ุฅุฌูุงูู ุงูุจูุงุบุงุช: ${stats.totalIncidents}`);
console.log(`ุฅุฌูุงูู ุงูุฃุนุถุงุก ูุฐุง ุงูุนุงู: ${stats.totalMembersThisYear}`);
```

## ุงูุชูุงูู ูุน ุงูุฅุตุฏุงุฑ ุงูุณุงุจู

ุงููุธุงู ุงูุฌุฏูุฏ **ูุชูุงูู ุชูุงูุงู** ูุน ุงูููุฏ ุงูููุฌูุฏ. ูุง ุญุงุฌุฉ ูุชุบููุฑ ุฃู ุดูุก ูู ุงููููุงุช ุงูุฃุฎุฑู!

## ุงูุฃุฏุงุก ูุงูุฃูุงู

- **ุฃุฏุงุก ุฃูุถู**: ุนุฏุงุฏ ูููุตู ุจุฏูุงู ูู ูุณุญ ุงููุตูููุฉ ูุงููุฉ
- **ุฃูุงู ุฃุนูู**: ุญูุงูุฉ ูู JSON ุชุงูู ู race conditions
- **ุงุณุชูุฑุงุฑ ุฃูุจุฑ**: ID ูุฑูุฏ ุญุชู ูู ุชูุฑุฑ ุงูุฑูู ุงูุชุณูุณูู
- **ูุฑููุฉ ุฃูุซุฑ**: ุฏุนู ุญุชู 9999 ุนุถู ููู ุณูุฉ
- **ูุฑุงูุจุฉ ุฃูุถู**: ุฏูุงู ูุญุต ุงูุชูุฑุงุฑ ูุณูุงูุฉ ุงูุจูุงูุงุช

## ุฅุฏุงุฑุฉ ุงูุนุฏุงุฏุงุช

```typescript
// ุฅุนุงุฏุฉ ุชุนููู ุงูุนุฏุงุฏุงุช (ููุงุณุชุฎุฏุงู ูู ุงูุชุทููุฑ ููุท)
resetCounters();

// ุงูุญุตูู ุนูู ุฅุญุตุงุฆูุงุช ููุตูุฉ
const stats = getNumberingStats();
console.log("ุฌููุน ุงูุนุฏุงุฏุงุช:", stats.allCounters);
```

ุงููุธุงู ุงูุฌุฏูุฏ ุฃุตุจุญ **ุขููุงู ููุณุชูุฑุงู ููุงุจูุงู ููุชูุณุน**! ๐
